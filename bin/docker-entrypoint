#!/bin/bash
set -e

# Remove um arquivo de PID pré-existente do servidor, se houver.
rm -f /rails/tmp/pids/server.pid

# Executa as migrações do banco de dados.
echo "Running database migrations..."
bundle exec rails db:migrate

# Então, executa o comando principal do contêiner para iniciar o servidor.
echo "Starting Rails server..."
exec bundle exec rails server -b 0.0.0.0
