#!/bin/bash
set -e

# Remove um arquivo de PID pré-existente do servidor, se houver.
rm -f /rails/tmp/pids/server.pid

# Executa as migrações do banco de dados.
# O Rails é inteligente o suficiente para não rodar migrações que já foram aplicadas.
bundle exec rails db:migrate

# Então, executa o comando principal do contêiner (que será `bin/rails server`).
# O "$@" passa todos os argumentos originais para o script.
exec bundle exec rails server


